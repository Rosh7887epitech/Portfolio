/*!
\page server_userguide Server User Guide ğŸš€

\tableofcontents

\section server_intro Welcome to Zappynian Server! ğŸ®

The Zappynian server is the heart of your multiplayer game experience! It manages the game world, handles player interactions, and coordinates between AI clients and GUI viewers. Think of it as the ultimate game master! ğŸ²

\section server_getting_started Getting Started ğŸŒŸ

\subsection server_compilation Compilation ğŸ”¨

To build the server, navigate to the server directory and run:
```bash
make
```

This will create the `zappy_server` executable ready to host your epic battles! âš”ï¸

\subsection server_launch_options Launch Options ğŸš€

The server accepts several command-line arguments to customize your game:

```bash
./zappy_server -p <port> -x <width> -y <height> -n <team1> <team2> ... -c <clients_per_team> -f <frequency>
```

\subsubsection server_args_detail Argument Details ğŸ“

- **-p port**: Network port for connections (default: 4242) ğŸŒ
- **-x width**: Map width in tiles (minimum: 5) ğŸ“
- **-y height**: Map height in tiles (minimum: 5) ğŸ“
- **-n team1 team2...**: Team names (minimum: 2 teams) ğŸ‘¥
- **-c clients_per_team**: Maximum AI clients per team (default: 1) ğŸ¤–
- **-f frequency**: Game tick frequency in Hz (default: 100) â°

\subsubsection server_example_launch Example Launch ğŸ¯

```bash
./zappy_server -p 4444 -x 10 -y 10 -n Team1 Team2 Team3 -c 3 -f 50
```

This creates a 10x10 world with 3 teams, allowing up to 3 AI clients per team at 50 ticks per second! ğŸ†

\section server_game_mechanics Game Mechanics ğŸ®

\subsection server_world_overview World Overview ğŸŒ

The server manages a **toroidal world** (wraparound edges) filled with resources and inhabited by AI players. Each tile can contain:

- **Food** ğŸ–: Essential for survival (players die without it!)
- **Linemate** ğŸ’: Required for elevation
- **Deraumere** ğŸ”·: Crystal for higher levels
- **Sibur** ğŸ”¸: Blue gem for advancement
- **Mendiane** ğŸ”¶: Orange stone for elevation
- **Phiras** ğŸ”´: Red crystal for rituals
- **Thystame** ğŸŸ£: Purple gem for the highest levels

\subsection server_player_lifecycle Player Lifecycle ğŸ‘¤

\subsubsection server_spawning Spawning ğŸ£

New players spawn randomly on the map with:
- **Level 1** ğŸ“Š
- **10 food units** ğŸ–
- **Random orientation** (North, East, South, West) ğŸ§­
- **Empty inventory** ğŸ’

\subsubsection server_survival Survival ğŸƒâ€â™‚ï¸

Players must manage their food carefully:
- **Food decreases every 126 ticks** â±ï¸
- **Death occurs at 0 food** â˜ ï¸
- **New eggs spawn when players die** ğŸ¥š

\subsection server_commands Player Commands ğŸ¯

The server processes these AI commands with specific durations:

\subsubsection server_movement_commands Movement Commands ğŸš¶â€â™‚ï¸

- **forward**: Move one tile ahead (7 ticks) â¡ï¸
- **right**: Turn 90Â° clockwise (7 ticks) â†ªï¸
- **left**: Turn 90Â° counter-clockwise (7 ticks) â†©ï¸

\subsubsection server_interaction_commands Interaction Commands ğŸ¤

- **look**: Get vision of surrounding tiles (7 ticks) ğŸ‘€
- **inventory**: Check personal resources (1 tick) ğŸ’
- **take <object>**: Pick up resource from current tile (7 ticks) ğŸ¤
- **set <object>**: Drop resource on current tile (7 ticks) ğŸ“¦
- **eject**: Push other players from current tile (7 ticks) ğŸ’¨

\subsubsection server_communication_commands Communication Commands ğŸ“¢

- **broadcast <text>**: Send message to all players (7 ticks) ğŸ“»
- **connect_nbr**: Get remaining team connection slots (0 ticks) ğŸ”—

\subsubsection server_special_commands Special Commands âœ¨

- **fork**: Create a new egg (42 ticks) ğŸ¥š
- **incantation**: Attempt level elevation (300 ticks) ğŸª„

\section server_elevation_system Elevation System ğŸ”ï¸

Level advancement requires specific conditions:

| Level | Players Needed | Linemate | Deraumere | Sibur | Mendiane | Phiras | Thystame |
|-------|----------------|----------|-----------|-------|----------|--------|----------|
| 1â†’2   | 1              | 1        | 0         | 0     | 0        | 0      | 0        |
| 2â†’3   | 2              | 1        | 1         | 1     | 0        | 0      | 0        |
| 3â†’4   | 2              | 2        | 0         | 1     | 0        | 2      | 0        |
| 4â†’5   | 4              | 1        | 1         | 2     | 0        | 1      | 0        |
| 5â†’6   | 4              | 1        | 2         | 1     | 3        | 0      | 0        |
| 6â†’7   | 6              | 1        | 2         | 3     | 0        | 1      | 0        |
| 7â†’8   | 6              | 2        | 2         | 2     | 2        | 2      | 1        |

**Level 8 = Victory!** ğŸ† The first team to get 6 players to level 8 wins!

\section server_gui_integration GUI Integration ğŸ–¥ï¸

The server supports graphical clients for real-time game visualization:

\subsection server_gui_connection GUI Connection ğŸ”Œ

Graphic clients connect separately and receive:
- **Real-time map updates** ğŸ—ºï¸
- **Player movements and actions** ğŸƒâ€â™‚ï¸
- **Resource spawning events** ğŸ’
- **Incantation ceremonies** ğŸª„
- **Game statistics** ğŸ“Š

\subsection server_gui_commands GUI Commands ğŸ“‹

- **msz**: Map size information
- **bct**: Tile content details  
- **mct**: Complete map content
- **tna**: Team names list
- **ppo**: Player position data
- **plv**: Player level information
- **pin**: Player inventory status
- **sgt**: Game time frequency
- **sst**: Set time frequency

\section server_resource_management Resource Management ğŸ’°

\subsection server_resource_spawning Resource Spawning ğŸŒ±

Resources spawn automatically:
- **Every 20 ticks**: Periodic resource generation ğŸ”„
- **Every 10 ticks**: Minimum resource check âœ…
- **Random distribution**: Balanced across the map ğŸ²

\subsection server_resource_density Resource Density ğŸ“ˆ

The server maintains optimal resource distribution to ensure fair gameplay and strategic depth!

\section server_troubleshooting Troubleshooting ğŸ”§

\subsection server_common_issues Common Issues ğŸ›

**Server won't start?** ğŸš«
- Check if port is already in use
- Verify all required arguments are provided
- Ensure minimum map size (5x5)

**Players disconnecting?** ğŸ“¡
- Check network connectivity
- Verify client compatibility
- Monitor server logs for errors

**Game feels slow/fast?** â°
- Adjust frequency parameter (-f)
- Balance between responsiveness and server load

\subsection server_performance_tips Performance Tips ğŸš€

- **Larger maps**: Better for more players, more strategic depth
- **Higher frequency**: More responsive but CPU intensive
- **More teams**: Increases complexity and fun! ğŸ‰
- **Monitor resources**: Keep an eye on server CPU/memory usage

\section server_advanced_features Advanced Features ğŸ“

\subsection server_timing_system Timing System âš™ï¸

The server uses a sophisticated timing manager that handles:
- **Command queuing** ğŸ“: Players can queue multiple commands
- **Precise timing** â±ï¸: Each command has exact duration
- **Concurrent execution** ğŸ”„: Multiple players act simultaneously

\subsection server_network_architecture Network Architecture ğŸŒ

Built on the robust **libzappy_net** library providing:
- **Reliable TCP connections** ğŸ”—
- **Efficient client management** ğŸ‘¥
- **Protocol parsing** ğŸ“‹
- **Error handling** ğŸ›¡ï¸

\section server_conclusion Ready to Rule the World! ğŸ‘‘

Your Zappynian server is now ready to host epic battles! Watch as AI teams compete for resources, form alliances, and race to achieve the ultimate goal of level 8 mastery. 

May the best team win! ğŸ†âœ¨

---
*Happy Gaming!* ğŸ®ğŸ’«
*/
